<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Koliba Zlatá podkova | Šport a zábava | rezervácia</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/image (3).png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <!-- =======================================================
  * Template Name: Restaurantly - v3.1.0
  * Template URL: https://bootstrapmade.com/restaurantly-restaurant-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

    <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-cente">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">

      <h1 class="logo me-auto me-lg-0"><a href="index.html"></a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <a href="index.html" class="logo me-auto me-lg-0"><img src="assets/img/logoBBig.png" alt="" class="img-fluid" style="max-height: 70px;"></a>

      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a class="nav-link scrollto active" href="index.html">Domov</a></li>
          <li><a class="nav-link scrollto" href="restaurant.html">Reštaurácia</a></li>
          <li><a class="nav-link scrollto" href="party_koliba.html">Párty koliba</a></li>
          <li><a class="nav-link scrollto" href="wedding.html">Svadba</a></li>
          <li><a class="nav-link scrollto" href="accpmmodation.html">Ubytovanie</a></li>
          <li><a class="nav-link scrollto" href="sports fields.html">Šport a zábava</a></li>

          <li class="dropdown"><a href="#"><span>Pre firmy</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              
                <ui>
                  <li>
              <li><a href="teambuildings.html">Teambuildingy</a></li>
              
            </ul>
          </li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
        
  
      </div>
    </header><!-- End Header -->

  <main id="main">
    

    



    <!-- ======= Contact Section ======= -->
   <section id="book-a-table" class="book-a-table">
  <style>
    .custom-checkbox {
      display: flex;
      align-items: center;
      cursor: pointer;
      font-size: 16px;
      color: #333;
      user-select: none;
      font-weight: 500;
    }

    .custom-checkbox input {
      display: none;
    }

    .custom-checkbox .checkmark {
      width: 20px;
      height: 20px;
      background-color: #f5f5eb;
      border: 2px solid #c7a556;
      margin-right: 10px;
      position: relative;
      border-radius: 4px;
      box-shadow: inset 0 0 1px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .custom-checkbox input:checked + .checkmark::after {
      content: "✔";
      color: #c7a556;
      font-size: 14px;
      font-weight: bold;
    }
    #price-container {
  text-align: center;
  margin-top: 15px;
}

#price-estimate {
  font-weight: bold;
  font-size: 1.2rem;
  color: #000; /* Čierna farba */
}

.price-label {
  color: #000;
  display: block;
  font-weight: normal;
  margin-bottom: 5px;
}
  </style>

  <div class="container" data-aos="fade-up">
    <div class="section-title">
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>
      <h2></h2>

      <h2>Rezervácia ihriska</h2>
      <p>Vyplňte formulár a rezervujte si ihrisko.</p>
    </div>

    

      <form action="forms/book-ihriska.php"
            method="post"
            class="php-email-form"
            data-aos="fade-up" data-aos-delay="100">
        <div class="row g-3">
          <!-- meno / email / telefón -->
          <div class="col-lg-4"><input name="name"  class="form-control" placeholder="Vaše meno"  required></div>
          <div class="col-lg-4"><input name="email" class="form-control" placeholder="Váš email" required></div>
          <div class="col-lg-4"><input name="phone" class="form-control" placeholder="Telefón"   required></div>

          <!-- dátum -->
          <div class="col-lg-4">
            <label for="date">Dátum rezervácie</label>
            <input type="date" name="date" id="date" class="form-control" required>
          </div>

          <!-- ihrisko -->
          <div class="col-lg-4">
            <label for="field">Ihrisko</label>
            <select name="field" id="field" class="form-control" required>
              <option value="">Vyberte ihrisko</option>
              <option value="Futbal">Futbal</option>
              <option value="Tenis">Tenis</option>
              <option value="Volejbal">Volejbal</option>
            </select>
          </div>

          <!-- čas -->
          <div class="col-lg-4">
            <label for="time">Voľné časy</label>
            <select name="time" id="time" class="form-control" required>
              <option value="">Najskôr vyberte dátum a ihrisko</option>
            </select>
          </div>

          <!-- trvanie -->
          <div class="col-lg-4">
            <input type="number" name="duration" id="duration"
                   class="form-control" placeholder="Trvanie (min)" required>
          </div>

          <!-- šatňa -->
          <div class="col-lg-4 d-flex align-items-center">
            <label class="custom-checkbox mb-0">
              <input type="checkbox" name="locker" value="yes">
              <span class="checkmark"></span> Chcem použiť šatňu
            </label>
          </div>

          <!-- tlačidlo modal -->
          <div class="col-lg-4 text-center">
            <button type="button" class="btn btn-outline-secondary w-100"
                    data-bs-toggle="modal" data-bs-target="#scheduleModal"
                    id="showScheduleBtn">Zobraziť obsadenosť</button>
          </div>
        </div>

        <!-- správa -->
        <textarea name="message" rows="5" class="form-control mt-3" placeholder="Správa"></textarea>

        <!-- hlášky -->
        <div class="loading">Načítava sa…</div>
        <div class="error-message"></div>
        <div class="sent-message">Vaša rezervácia bola úspešne odoslaná. Ďakujeme!</div>

        <!-- cena -->
        <div id="price-container" class="text-center mt-3">
          <span class="price-label">Odhadovaná cena:</span>
          <div id="price-estimate">0 €</div>
        </div>

        <div class="text-center mt-3"><button type="submit">Rezervovať teraz</button></div>
        <div class="g-recaptcha mt-3" data-sitekey=""></div>
      </form>
    </div>
  </section>

  <!-- ======= MODAL ======= -->
  <div class="modal fade" id="scheduleModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Harmonogram obsadenosti</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="schedule-table" class="table-responsive text-center">Načítava sa…</div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- ========= SCRIPTS ========= -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  /* ---- DOM prvky ---- */
  const dateInput    = document.getElementById('date');
  const fieldSelect  = document.getElementById('field');
  const timeSelect   = document.getElementById('time');
  const durationIn   = document.getElementById('duration');
  const lockerChk    = document.querySelector('input[name="locker"]');
  const priceLabel   = document.getElementById('price-estimate');
  const showSchedule = document.getElementById('showScheduleBtn');

  /* ---- Načítanie voľných časov ---- */
  async function loadAvailableTimes () {
    const date     = dateInput.value;
    const field    = fieldSelect.value;
    const duration = durationIn.value || 60;

    if (!date || !field || !duration) { return; }

    try {
      const resp  = await fetch(`forms/get-available-times.php?date=${date}&field=${field}&duration=${duration}`);
      const times = await resp.json();

      timeSelect.innerHTML = '';
      if (!Array.isArray(times) || times.length === 0) {
        timeSelect.innerHTML = '<option value="">Žiadne voľné časy</option>';
        return;
      }

      times.forEach(t => {
        timeSelect.insertAdjacentHTML('beforeend',
          `<option value="${t}">${t}</option>`
        );
      });
    } catch (err) { console.error(err); }
  }

  /* ---- Modal (týždňová tabuľka) ---- */
  async function loadSchedule () {
    const date  = dateInput.value;
    const field = fieldSelect.value;
    if (!date || !field) { return alert('Najskôr vyberte dátum a ihrisko.'); }

    const container = document.getElementById('schedule-table');
    container.textContent = 'Načítava sa…';

    try {
      const resp = await fetch(`forms/get-available-times.php?date=${date}&field=${field}`);
      const data = await resp.json();           // objekt { "YYYY-MM-DD HH:MM": true|false }

      /* generovanie tabuľky */
      const start = new Date(date);
      let html = '<table class="table table-bordered text-center"><thead><tr><th>Čas</th>';
      for (let i = 0; i < 7; i++) {
        const d = new Date(start); d.setDate(d.getDate()+i);
        html += `<th>${d.toLocaleDateString('sk-SK',{weekday:'short',day:'2-digit',month:'2-digit'})}</th>`;
      }
      html += '</tr></thead><tbody>';

      for (let h = 8; h <= 22; h++) {
        html += `<tr><td>${h}:00</td>`;
        for (let i = 0; i < 7; i++) {
          const d = new Date(start); d.setDate(d.getDate()+i);
          const key = `${d.toISOString().split('T')[0]} ${String(h).padStart(2,'0')}:00`;
          const taken = data[key];
          html += `<td class="${taken?'text-danger':'text-success'}">${taken?'Rezervované':'Voľné'}</td>`;
        }
        html += '</tr>';
      }
      html += '</tbody></table>';
      container.innerHTML = html;
    } catch (err) {
      container.innerHTML = '<p class="text-danger">Nepodarilo sa načítať obsadenosť.</p>';
    }
  }

  /* ---- Odhad ceny ---- */
  function updatePrice () {
    const field    = fieldSelect.value;
    const time     = timeSelect.value;
    const date     = dateInput.value;
    const duration = parseInt(durationIn.value,10);
    if (!field || !time || !date || !duration) { priceLabel.textContent = '0 €'; return; }

    const hour      = parseInt(time.split(':')[0],10);
    const weekday   = new Date(date).getDay();        // 0–6
    const weekend   = (weekday === 0 || weekday === 6);
    const evening   = hour >= 16;

    const pricelist = {
      Futbal  : { 60:[15,20], 90:[20,25], 120:[25,30] },
      Tenis   : { 60:[13,15], 90:[17,20], 120:[20,25] },
      Volejbal: { 60:[15,20], 90:[20,25], 120:[25,30] }
    };
    const bracket = pricelist[field]?.[duration] ?? [0,0];
    let price = weekend || evening ? bracket[1] : bracket[0];
    if (lockerChk.checked) price += 5;
    priceLabel.textContent = price.toFixed(2) + ' €';
  }

  /* ---- Event-listenery ----- */
  dateInput    .addEventListener('change', loadAvailableTimes);
  fieldSelect  .addEventListener('change', loadAvailableTimes);
  durationIn   .addEventListener('change', loadAvailableTimes);

  [fieldSelect,timeSelect,dateInput,durationIn,lockerChk]
    .forEach(el => el.addEventListener('change', updatePrice));
  durationIn.addEventListener('input', updatePrice);

  showSchedule.addEventListener('click', loadSchedule);
});
</script>

<!-- End Book A Table Section --><!-- End Book Accommodation Section --><!-- End Contact Section -->

  

   <!-- ======= Footer ======= -->
   <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">
          
          <!-- Kontakt -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-info">
              <h3>Kontakt</h3>
              <p>
                Telefón: 055/6740488<br>
                Email: <a href="mailto:office@zlatapodkova.sk">office@zlatapodkova.sk</a><br>
                <a href="mailto:koliba.sportovisko@gmail.com">koliba.sportovisko@gmail.com</a>
              </p>
            </div>
          </div>
          
          <!-- Otváracie hodiny -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-info">
              <h3>Otváracie hodiny</h3>
              <p>
                Pondelok: 11:00 – 22:00<br>
                Utorok: 11:00 – 22:00<br>
                Streda: 11:00 – 22:00<br>
                Štvrtok: 11:00 – 22:00<br>
                Piatok: 11:00 – 23:00<br>
                Sobota: 11:00 – 23:00<br>
                Nedeľa: 11:00 – 21:00
              </p>
            </div>
          </div>
          
          <!-- Adresa -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-info">
              <h3>Adresa</h3>
              <p>
                Sídlisko KVP II., Szabadošova 04023<br>
                Košice, Slovenská republika
              </p>
              <a href="https://www.google.com/maps/search/?api=1&query=Sídlisko+KVP+II.,+Szabadošova+3140,+Košice" target="_blank">Zobraziť mapu</a>
            </div>
          </div>
          
          <!-- Sociálne siete -->
          <div class="col-lg-3 col-md-6">
            <div class="footer-info">
              <h3>Sociálne siete</h3>
              <div class="social-links mt-3">
                
                <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>

    

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>
<script>
  const pitch = document.getElementById("pitch");
  const time = document.getElementById("time");
  const date = document.getElementById("date");
  const duration = document.getElementById("duration");
  const locker = document.querySelector("input[name='locker']");
  const priceField = document.getElementById("price-estimate");

  function updatePrice() {
    const pitchVal = pitch.value;
    const timeVal = time.value;
    const dateVal = date.value;
    const durationVal = parseInt(duration.value);
    const useLocker = locker.checked;

    if (!pitchVal || !timeVal || !dateVal || !durationVal) {
      priceField.textContent = "0 €";
      return;
    }

    const day = new Date(dateVal).getDay(); // 0 = Nedeľa, 6 = Sobota
    const hour = parseInt(timeVal.split(":")[0]);

    const isWeekend = (day === 0 || day === 6);
    const isEvening = hour >= 16;

    let basePrice = 0;

    const pricing = {
      "Futbal": {
        "60": [15, 20],
        "90": [20, 25],
        "120": [25, 30]
      },
      "Tenis": {
        "60": [13, 15],
        "90": [17, 20],
        "120": [20, 25]
      },
      "Volejbal": {
        "60": [15, 20],
        "90": [20, 25],
        "120": [25, 30]
      }
    };

    const category = pricing[pitchVal];
    const key = [60, 90, 120].includes(durationVal) ? durationVal.toString() : null;

    if (category && key) {
      if (isWeekend) {
        basePrice = category[key][1];
      } else {
        basePrice = isEvening ? category[key][1] : category[key][0];
      }
    }

    if (useLocker) {
      basePrice += 5;
    }

    priceField.textContent = basePrice.toFixed(2) + " €";
  }

  pitch.addEventListener("change", updatePrice);
  time.addEventListener("change", updatePrice);
  date.addEventListener("change", updatePrice);
  duration.addEventListener("input", updatePrice);
  locker.addEventListener("change", updatePrice);
</script>

</html>